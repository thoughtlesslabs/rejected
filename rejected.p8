pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
-- rejected
-- a thoughtless labs experiment

function _init()
	comp={
	 {name="jimbo",x=80,y=100,dx=0,dy=0},
	 {name="tank",x=20,y=100,dx=0,dy=0}
	 }
	player={
		name="you",x=5,y=60,dx=0,dy=0}
	
	ball={
		x=50,y=10,dx=0,dy=0}
		
	gravity = 0.9
	friction = 0.6
	jumping = false
	current = 1
end

function _update60()
	moveplayer()
	moveai(ball.x,ball.y)
	moveball()
end

function _draw()
	cls()
	print(player.dy)
	print(player.y)
	spr(1,player.x,player.y)
	rectfill(comp[current].x,comp[current].y,comp[current].x+5,comp[current].y+5,5)
	spr(17,ball.x,ball.y)
end

function moveplayer()
	if btn(0) then player.dx-=1 end
	if btn(1) then player.dx+=1 end
	if btnp(2) then player.dy-=10 end
	if btn(3) then player.dy+=1 end

	player.dx *= friction
	player.dy += gravity
	
	player.x += player.dx
	player.y += player.dy
	
	player.x = mid(0,player.x,100)
	player.y = mid(0,player.y,100)
	
	if player.y >=100 then
		player.dy = 0
	end
end
-->8
-- computer

function moveai(cx,cy)
	local speed,angle,ccx,ccy
	co = comp[current]
	speed = 0.5
	
	ccx = cx - co.x
	ccy = cy - co.y
	
	angle = atan2(ccx,ccy)
	
	co.x += cos(angle)*speed
	if ccy < 50 and not jumping then
		jumping = true
		co.dy -=1
  co.y += sin(angle)*speed
	end

	co.dy += gravity
	co.y += co.dy
	co.x = mid(0,co.x,90)
	co.y = mid(0,co.y,90)
	
	if co.y >=100 then
		co.dy = 0
	end
end

function moveball()
 ball.dy += gravity
	
	ball.x += ball.dx
	ball.y += ball.dy
	
	ball.x = mid(0,ball.x,50)
	ball.y = mid(0,ball.y,50)
	
	if ball.y >=100 then
		ball.dy -= ball.dy
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000ccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c0c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c0c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000090990900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999099090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000099099000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000900000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999099090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000090990900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
